apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: all-services-ingress
  namespace: default
  annotations:
    appgw.ingress.kubernetes.io/backend-protocol: "http"
    appgw.ingress.kubernetes.io/health-probe-path: "/"
spec:
  ingressClassName: azure-application-gateway
  rules:
  - http:
      paths:
      # Authentication service routes
      - path: /api/login*
        pathType: Prefix
        backend:
          service:
            name: authenticationservice-service
            port:
              number: 80
      - path: /api/register*
        pathType: Prefix
        backend:
          service:
            name: authenticationservice-service
            port:
              number: 80
      - path: /api/validate*
        pathType: Prefix
        backend:
          service:
            name: authenticationservice-service
            port:
              number: 80
      - path: /api/delete*
        pathType: Prefix
        backend:
          service:
            name: authenticationservice-service
            port:
              number: 80
      
      # Cart service routes
      - path: /api/cart*
        pathType: Prefix
        backend:
          service:
            name: cartservice-service
            port:
              number: 80
      
      # Review service routes - ESPECÍFICOS PRIMERO
      - path: /api/courses/search*
        pathType: Prefix
        backend:
          service:
            name: reviewservice-service
            port:
              number: 80
      - path: /api/SubmitReview*
        pathType: Prefix
        backend:
          service:
            name: reviewservice-service
            port:
              number: 80
      - path: /api/review*
        pathType: Prefix
        backend:
          service:
            name: reviewservice-service
            port:
              number: 80
      
      # Course catalog service routes - GENÉRICOS DESPUÉS
      - path: /api/coursecatalog*
        pathType: Prefix
        backend:
          service:
            name: coursecatalogservice-service
            port:
              number: 80
      - path: /api/courses*
        pathType: Prefix
        backend:
          service:
            name: coursecatalogservice-service
            port:
              number: 80
      
      # Email service routes
      - path: /api/email*
        pathType: Prefix
        backend:
          service:
            name: emailservice-service
            port:
              number: 80
      
      # Payment service routes
      - path: /api/payment*
        pathType: Prefix
        backend:
          service:
            name: paymentservice-service
            port:
              number: 80